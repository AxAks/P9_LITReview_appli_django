<!DOCTYPE html>
<html lang="fr">

{% load static %}
{% load crispy_forms_tags %}

<head>
    <meta charset="UTF-8">
    <title>Critique - Modification</title>
</head>
<body>
        <div class="list-group-item">Vous etes en train de modifier la critique du ticket suivant:
            <p>{% include 'reviews/snippets/ticket_snippet.html' with post=context.associated_ticket %}</p>

    <form method="post" action="">
    {% csrf_token %}
    {{ form_review.non_field_errors }}
            <p>
                <div>- Titre: {{ context.post.headline }}</div>
                <p class="fieldWrapper">
                    {{ form_review.headline.errors }}
                    {{ form_review.headline | as_crispy_field }}
                </p>
            </p>
            <p class="fieldWrapper">
                - Note: {{ context.post.rating }}
                <p class="form-check-inline">
                    <div>{{ form_review.rating.label }}</div>
                    {{ form_review.rating.errors }}
                    {% for notation in form_review.rating %}
                        {{ notation }} <!-- Affichage OK mais plus de crispy form, plus de help text à cause de la boucle-->
                    {% endfor %}
                    <p>
                    <small class="form-text text-muted">
                        {{ form_review.rating.help_text }}
                    </small> <!-- pas bon ! mal affiché et il faut que j'arrive à le mette comme dans les autres champs  -->
                    </p>
                </p>
            </p>

            <p class="fieldWrapper">
                <div>- Commentaire: {{ context.post.body }}</div>
                <p class="fieldWrapper">
                    {{ form_review.body.errors }}
                    {{ form_review.body | as_crispy_field }}
                </p>
            </p>
            <p class="fieldWrapper">
                <button class="btn btn-sm bg-primary btn-outline-dark" type="submit">
                Modifier la critique
                </button>
            </p>
    </form>
    </div>
</body>
</html>