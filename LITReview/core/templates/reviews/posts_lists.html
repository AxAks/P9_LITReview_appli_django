{% extends 'base.html' %}

{% load bootstrap4 %}
<!--
    Possible d'utiliser le meme template pour "mes Posts" et le "feed" ?
    avec des if else (limité à l'user courant OU ALORS les posts de tous les utilisateurs que l'user courant suit,
    à voir !
    (le titre aussi serait variable)
-->
    {% block title %} {{ context.title }} {% endblock %}

    {% block content %}
        {% if context.url_name == 'feed' %}
        <div>
            <a href="{% url 'ticket_creation' %}">
                <button class="btn btn-outline-dark">Demander un critique</button>
            </a>
            <a href="{% url 'review_creation_no_ticket' %}">
                <button class="btn btn-outline-dark">Créer une critique</button>
            </a>

            <hr>
            <p>DEBUG (à retirer)</p>
            <a href="{% url 'ticket_modification' %}">
                <button class="btn btn-outline-dark">Modifier un ticket</button>
            </a>
            <a href="{% url 'review_creation_reply' %}">
                <button class="btn btn-outline-dark">Répondre à une demande de critique</button>
            </a>
            <a href="{% url 'review_modification' %}">
                <button class="btn btn-outline-dark">Modifier une critique</button>
            </a>

        </div>
        {% endif %}

        <div>
            {% if context.following_users_posts %}
                <h4>Liste des reviews et tickets à mettre ici</h4>
                {% for post in context.following_users_posts %}
                    <ul>
                        <li>
                            - Utilisateur: {{ post.user }}<br/>
                            - Titre: {{ post.title }}<br/>
                            - Description: {{ post.description }}
                        </li>
                    </ul>
                {% endfor %}

                {% else %}
                    <p>Pas de review ou ticket à afficher</p>
            {% endif %}
        </div>

        <div>
            {% if context.user_posts %}
                <h4>Liste des reviews et tickets à mettre ici</h4>
                {% for post in context.user_posts %}
                <ul>
                    <li>
                        - Utilisateur: {{ post.user }}<br/>
                        - Titre: {{ post.title }}<br/>
                        - Description: {{ post.description }}
                    </li>
                </ul>
                {% endfor %}

                {% else %}
                    <p>Pas de review ou ticket à afficher</p>
            {% endif %}
        </div>
    {% endblock %}